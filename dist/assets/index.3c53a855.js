var T=Object.defineProperty;var D=(s,e,n)=>e in s?T(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var a=(s,e,n)=>(D(s,typeof e!="symbol"?e+"":e,n),n);import{l as p,p as V}from"./vendor.7b0d4df6.js";const L=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};L();function w(s,e,n,t){return Math.min(n/s,t/e)}class N{constructor(){a(this,"constraints",{audio:!1,video:{facingMode:"user"}});a(this,"video");a(this,"stream");a(this,"canvas");a(this,"video_container");a(this,"getVideoTrack",()=>{var e,n;return(n=(e=this.stream)==null?void 0:e.getVideoTracks())==null?void 0:n[0]});a(this,"getCapabilities",()=>{var e;return(e=this.getVideoTrack())==null?void 0:e.getCapabilities()});a(this,"getMaxHeight",()=>{var e;return(e=this.getCapabilities())==null?void 0:e.height.max});a(this,"getMaxWidth",()=>{var e;return(e=this.getCapabilities())==null?void 0:e.width.max});a(this,"getMaxDimensions",()=>[this.getMaxWidth(),this.getMaxHeight()]);a(this,"getMaxDimensionsConstraints",()=>({width:this.getMaxWidth(),height:this.getMaxHeight()}));a(this,"getDimensions",()=>({width:this.getWidth(),height:this.getHeight()}));a(this,"getWidth",()=>{var e,n;return(n=(e=this.getVideoTrack())==null?void 0:e.getSettings())==null?void 0:n.width});a(this,"getHeight",()=>{var e,n;return(n=(e=this.getVideoTrack())==null?void 0:e.getSettings())==null?void 0:n.height});a(this,"pixels",[[]]);a(this,"getPixels",(e,n)=>{if(this.video){let t=this.video.offsetWidth,i=this.video.offsetHeight,o=100;this.canvas.width=t,this.canvas.height=i;let r=w(t,i,e,n);t*=r,i*=r;let d=w(t,i,o,o);t*=d,i*=d;let l=this.canvas.getContext("2d");l.drawImage(this.video,0,0,t,i);let m=l.getImageData(0,0,t,i),h=p.exports.chunk(p.exports.chunk(m.data,4),t);h=h.map(g=>g.reverse()),this.pixels=h[0].map((g,f)=>h.map(c=>c[f]))}return this.pixels});this.video_container=document.createElement("div"),this.canvas=document.createElement("canvas"),navigator.mediaDevices.getUserMedia(this.constraints).then(e=>(this.video=document.createElement("video"),this.video.playsInline=!0,this.video_container.append(this.video),this.video_container.style.position="absolute",this.video_container.style.visibility="hidden",this.video_container.style.height="0px",this.video_container.style.width="0px",this.video_container.style.overflow="hidden",document.body.append(this.video_container),this.stream=e,this.video.srcObject=e,this.video.onloadedmetadata=n=>{let t=this.getMaxDimensionsConstraints();return this.getVideoTrack().applyConstraints(t),this.canvas.width=t.width,this.canvas.height=t.height,this.video.play()})).catch(function(e){console.log("uh it didnt work"),alert(e)})}}const v='@W\xD1$9806532ba4c7?1=~"-;:,.   ',O=1.5;document.createElement("canvas");let x,P=!0;const S=()=>{x=new N},z=s=>{let e;document.body.style.backgroundColor="black",s.setup=()=>{let t=window.innerWidth,i=window.innerHeight;e=s.createCanvas(t,i),S()},s.draw=()=>{if(x&&P){let[r,d]=[document.body.offsetWidth,document.body.offsetHeight];console.log("setting canvas to "+r+","+d),s.resizeCanvas(r,d),s.clear(0,0,0,255);let l=x.getPixels(r,d);n(s,l)}let t=window.innerWidth/2,i=window.innerHeight/2,o=[(window.innerWidth-t)/2,(window.innerHeight-i)/2];s.translate(...o)};function n(t,i){t.resetMatrix(),t.clear(0,0,0,255),t.background(0),t.fill(255,255,255);let o=i.length,r=i[0].length,d=w(o,r,e.width,e.height),l=o*d,m=r*d,h=Math.min(l/o,m/r),g=(e.width-h*o)/2,f=(e.height-h*r)/2;for(let c=0;c<o;c++)for(let u=0;u<r;u++){let[b,_,M,I]=i[c][u],k=Math.floor((b+_+M)/3);t.noStroke();let C=c*h+g,W=u*h+f,H=O*h;t.textSize(H),t.textAlign(t.CENTER,t.CENTER);let E=v.length,y;y=v.length-Math.floor(k/255*E),t.text(v[y],C+h*.5,W+h*.5)}}};new V(z,document.body);document.body.onclick=()=>{};
